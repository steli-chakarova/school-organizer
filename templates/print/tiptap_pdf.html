<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Export</title>
  <style>
    /* Page margins for better space usage */
    @page {
      margin: 10mm 5mm 10mm 5mm;  /* further reduced margins: top right bottom left */
    }

    /* Content width = table width; adjust if needed */
    .doc {
      --content-width: 100%;       /* use full available width */
      max-width: 100%;
      width: var(--content-width);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      font-size: 12px; line-height: 1.4; color: #111;
      margin: 0;                   /* no centering margin */
      padding: 0 5px;              /* minimal side padding */
    }

    /* Two-column layout for subject content */
    .subject-content {
      display: flex;
      margin: 5px 0;
      position: relative;
      gap: 10px;                   /* use gap instead of padding for cleaner spacing */
      break-inside: auto;          /* allow subject blocks to break across pages if needed */
    }

    .left-column {
      flex: 2;
      width: 66.67%;
      padding-right: 8px;
      box-sizing: border-box;
      break-inside: auto;          /* allow Notes to flow across pages naturally */
    }

    .right-column {
      flex: 1;
      width: 33.33%;
      padding-left: 8px;
      box-sizing: border-box;
    }

    /* Vertical divider line between columns */
    .subject-content::after {
      content: '';
      position: absolute;
      left: 66.67%;
      top: 0;
      bottom: 0;
      width: 1px;
      background-color: #d7d7d7;
      transform: translateX(-50%);
    }

    .section {
      margin-bottom: 8px;         /* reduced from 15px */
      /* Allow sections to break across pages for natural flow */
      break-inside: auto;
    }

    /* Reduce spacing between Ресурси and Записки */
    .left-column .section:first-of-type {
      margin-bottom: 4px;          /* reduced from 5px */
    }
    
    /* Further reduce spacing for Notes section specifically */
    .left-column .section:nth-of-type(2) {
      margin-top: 0;                /* no top margin for Notes section */
    }
    
    /* Remove bottom margin from last section in each column */
    .left-column .section:last-of-type,
    .right-column .section:last-of-type {
      margin-bottom: 0;
    }

    .section-title {
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 3px;         /* reduced from 5px */
      margin-top: 0;
      color: #333;
    }
    
    /* Reduce spacing in notes content - paragraphs, divs, etc. */
    .section p {
      margin: 2px 0;              /* minimal paragraph spacing */
    }
    
    .section p:first-child {
      margin-top: 0;              /* no top margin on first paragraph */
    }
    
    .section p:last-child {
      margin-bottom: 0;           /* no bottom margin on last paragraph */
    }
    
    /* Reduce spacing in notes divs and other block elements */
    .section > div:not(.section-title) {
      margin: 0;
    }
    
    /* Reduce spacing between list items and paragraphs in notes */
    .section ul + p,
    .section ol + p,
    .section p + ul,
    .section p + ol {
      margin-top: 4px;
    }

    /* Subject title styling with underline */
    h2 {
      border-bottom: 1px solid #d7d7d7;
      padding-bottom: 3px;
      margin-top: 8px;             /* reduced top margin */
      margin-bottom: 6px;          /* reduced from 12px */
    }
    
    /* Title spacing */
    h1 {
      margin-bottom: 6px !important;  /* reduced from 10px */
    }

    /* Tables - keep together but allow section to break around them */
    .doc table { 
      border-collapse: collapse; 
      width: 100%; 
      break-inside: avoid;        /* keep table rows together */
      page-break-inside: avoid;  /* older browser support */
    }
    .doc th, .doc td { border: 0.5px solid #ddd; padding: 6px; vertical-align: top; }
    .doc thead th { background: #eee; font-weight: 700; }

    /* Lists (bullets & numbers) — allow natural flow across pages */
    .doc ul { 
      list-style: disc; 
      padding-left: 16px; 
      margin: 2px 0;              /* reduced from .3rem */
      break-inside: auto;        /* allow lists to break across pages */
    }
    .doc ol { 
      list-style: decimal; 
      padding-left: 18px; 
      margin: 2px 0;              /* reduced from .3rem */
      break-inside: auto;        /* allow lists to break across pages */
    }
    .doc li { 
      margin: 1px 0;              /* reduced from .15rem */
      break-inside: avoid;       /* keep individual list items together */
    }
    .doc li::marker { font-size: .95em; }

    /* Tiptap task list → [_] / [x] */
    .doc ul[data-type="taskList"] { list-style: none; padding-left: 0; margin: .3rem 0; }
    .doc ul[data-type="taskList"] li { display: flex; gap: .45rem; align-items: flex-start; }
    .doc ul[data-type="taskList"] input[type="checkbox"] { display: none; }
    .doc ul[data-type="taskList"] li[data-checked="true"]::before  { content: "[x]"; }
    .doc ul[data-type="taskList"] li[data-checked="false"]::before { content: "[_]"; }
    /* Fallback if label wraps */
    .doc ul[data-type="taskList"] li > label { display: contents; }
    .doc ul[data-type="taskList"] li[data-checked="true"]  > label::before { content: "[x]"; }
    .doc ul[data-type="taskList"] li[data-checked="false"] > label::before { content: "[_]"; }

    /* Blockquote (aligned to table width) */
    .doc blockquote {
      width: 100%; box-sizing: border-box;
      background: #f8f9fa; border: none;
      padding: 8px 10px; margin: 8px 0;
      break-inside: avoid;
    }

    /* Inline styles */
    .doc i, .doc em { font-style: italic !important; }
    .doc b, .doc strong { font-weight: 700 !important; }
    .doc u { text-decoration: underline !important; }
    
    /* Ensure italic works inside blockquotes */
    .doc blockquote i, .doc blockquote em { font-style: italic !important; }
    .doc blockquote b, .doc blockquote strong { font-weight: 700 !important; }
    .doc blockquote u { text-decoration: underline !important; }

    /* Misc */
    .doc hr { border: none; border-top: 1px solid #d7d7d7; margin: 16px 0; }
    table, blockquote { break-inside: avoid; }
  </style>
</head>
<body>
  <!-- We render the same tiptap markup you put in today.html/mobile_today.html -->
  <div class="doc tiptap">
    {{ doc_html|safe }}
  </div>
</body>
</html>
